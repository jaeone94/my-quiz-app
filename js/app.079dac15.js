(function(){"use strict";var e={7783:function(e,t,i){t.Z=i.p+"5868511187d56bfc24f03f78fcfd4853.xlsx"},5681:function(e,t,i){var s=i(9242),n=i(3396),r=i(7139);const o={class:"app-container"},l={class:"top-menu"},a=["href"],u={class:"content-container"};function c(e,t,i,s,c,d){const h=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",l,[c.isSidebarOpen?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>d.toggleSidebar&&d.toggleSidebar(...e)),class:"hamburger-btn"},"☰"))]),(0,n._)("div",{class:(0,r.C_)(["sidebar-menu",{open:c.isSidebarOpen}])},[(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>d.toggleSidebar&&d.toggleSidebar(...e)),class:"close-btn"},"✖"),(0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>d.goToHome&&d.goToHome(...e)),class:(0,r.C_)([{"selected-btn":d.isActive("/")},"main-btn"])},"HOME",2),(0,n._)("a",{href:d.downloadUrl,download:"excel-template.xlsx",class:"main-btn download-btn"},"양식 다운로드",8,a),(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>d.goToUpload&&d.goToUpload(...e)),class:(0,r.C_)([{"selected-btn":d.isActive("/Upload")},"main-btn"])},"문제 업로드",2),(0,n._)("button",{onClick:t[4]||(t[4]=(...e)=>d.goToQuiz&&d.goToQuiz(...e)),class:(0,r.C_)([{"selected-btn":d.isActive("/Quiz")},"main-btn"])},"문제 풀기",2)],2),(0,n._)("div",u,[(0,n.Wm)(h)])])}i(560);var d={data(){return{isSidebarOpen:!1}},computed:{downloadUrl(){return i(7783).Z}},methods:{toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen},goToHome(){this.$router.push("/"),this.isSidebarOpen=!1},goToUpload(){this.$router.push("/Upload"),this.isSidebarOpen=!1},goToQuiz(){this.$router.push("/Quiz"),this.isSidebarOpen=!1},isActive(e){return this.$route.path===e}}},h=i(89);const p=(0,h.Z)(d,[["render",c],["__scopeId","data-v-4ac6dc82"]]);var z=p,f=i(2483);const w=e=>((0,n.dD)("data-v-25038858"),e=e(),(0,n.Cn)(),e),g={class:"my-home-container"},m=w((()=>(0,n._)("h1",{class:"home-title"},"문제 업로드 & 풀기 !",-1))),b={class:"big-btns-container"},v=w((()=>(0,n._)("button",{class:"big-btn"},"문제 업로드",-1))),Q=w((()=>(0,n._)("button",{class:"big-btn"},"문제 풀기",-1)));function k(e,t){const i=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",g,[m,(0,n._)("div",b,[(0,n.Wm)(i,{to:"/Upload"},{default:(0,n.w5)((()=>[v])),_:1}),(0,n.Wm)(i,{to:"/Quiz"},{default:(0,n.w5)((()=>[Q])),_:1})])])}const y={},C=(0,h.Z)(y,[["render",k],["__scopeId","data-v-25038858"]]);var D=C;const q=e=>((0,n.dD)("data-v-19565bac"),e=e(),(0,n.Cn)(),e),A={class:"upload-container"},_=q((()=>(0,n._)("h1",{class:"upload-title"},"문제 업로드",-1))),x=q((()=>(0,n._)("p",{class:"upload-guide"},[(0,n.Uk)("다운로드한 엑셀 양식에 문제와 답을 작성하고 업로드해주세요. "),(0,n._)("br"),(0,n.Uk)("( *.xlsx 확장자만 업로드 가능합니다.)")],-1))),O={key:0,class:"errorMessage"};function S(e,t,i,s,o,l){return(0,n.wg)(),(0,n.iD)("div",A,[_,x,(0,n._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),ref:"fileInput"},null,544),o.errorMessage?((0,n.wg)(),(0,n.iD)("div",O,(0,r.zw)(o.errorMessage),1)):(0,n.kq)("",!0)])}var T=i(7092),I={data(){return{errorMessage:null}},methods:{handleFileUpload(e){const t=e.target.files;if(!t.length)return;const i=t[0];if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==i.type)return this.errorMessage="업로드한 파일이 xlsx 파일이 아닙니다.",void(this.$refs.fileInput.value=null);const s=new FileReader;s.onload=e=>{const t=e.target.result,i=T.ij(t,{type:"binary"}),s=i.SheetNames[0],n=i.Sheets[s],r=T.P6.sheet_to_json(n);this.excelData=r;const o={Comment:null,"문제":null,"보기A":null,"보기B":null,"보기C":null,"보기D":null,"보기E":null,"정답1":null,"정답2":null,"정답3":null,"정답4":null,"정답5":null,"해설":null},l=this.excelData.map((e=>({...o,...e}))),a=["문제","보기A","보기B","보기C","정답1"];let u=!1;l.forEach((e=>{if(a.forEach((t=>{if(!e[t]||" "===e[t]||""===e[t])return this.errorMessage=`${t} 필드에 올바르지 않은 값이 있습니다.`,void(u=!0)})),u)return;const t=["정답1","정답2","정답3","정답4","정답5"];t.forEach((t=>{const i=e[t];if(i&&!["A","B","C","D","E"].includes(i.toUpperCase()))return this.errorMessage=`${t} 필드에 유효한 정답(A, B, C, D, E)이 아닌 값이 있습니다.`,void(u=!0)}))})),u||(this.excelData=l),console.log(this.excelData),this.saveProcess(this.excelData)},s.readAsBinaryString(i)},saveProcess(e){const t=prompt("데이터의 이름을 입력하세요:");t&&""!==t.trim()?this.saveToDB(t,e).then((()=>{alert("성공적으로 저장되었습니다."),this.$router.push("/Quiz")})).catch((e=>{console.error("저장 중 오류 발생:",e),alert("저장에 실패하였습니다.")})):alert("올바른 이름을 입력하세요.")},async saveToDB(e,t){const i=this.$db,s={name:e,data:t,inputdate:new Date};return i.quizzes.add(s)}}};const U=(0,h.Z)(I,[["render",S],["__scopeId","data-v-19565bac"]]);var E=U;const $=e=>((0,n.dD)("data-v-d1413196"),e=e(),(0,n.Cn)(),e),P={class:"quiz-container"},M={key:0,class:"quiz-list"},j=$((()=>(0,n._)("h1",null,"문제 풀기",-1))),B=$((()=>(0,n._)("p",null,"업로드한 문제를 풀면서 학습하기",-1))),Z={class:"quiz-item"},H={class:"quiz-info"},K={class:"quiz-title"},L={class:"quiz-datetime"},R=["onClick"],F=["onClick"],W={key:0},V=$((()=>(0,n._)("p",null,"먼저 문제를 업로드 해주세요.",-1))),N=[V];function Y(e,t,i,s,o,l){const a=(0,n.up)("QuizDetail");return(0,n.wg)(),(0,n.iD)("div",P,[o.showQuizDetail?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",M,[j,B,(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.sortedQuizzes,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.id},[(0,n._)("div",Z,[(0,n._)("div",H,[(0,n._)("span",K,(0,r.zw)(e.name),1),(0,n._)("span",L,(0,r.zw)(l.formatQuizDateTime(e.inputdate)),1)]),(0,n._)("button",{class:"start",onClick:t=>l.startQuiz(e.id)},"퀴즈 시작",8,R),(0,n._)("button",{class:"delete",onClick:t=>l.deleteQuiz(e.id)},"삭제",8,F)])])))),128))]),0===o.quizzes.length?((0,n.wg)(),(0,n.iD)("div",W,N)):(0,n.kq)("",!0)])),o.showQuizDetail?((0,n.wg)(),(0,n.j4)(a,{key:1,quizDetail:e.selectedQuiz,shuffleQuiz:o.shuffleQuiz,onClose:l.closeQuizDetail},null,8,["quizDetail","shuffleQuiz","onClose"])):(0,n.kq)("",!0)])}const G={class:"quiz-container"},J={class:"quiz-control"},X={class:"prev-next"},ee={class:"quiz-content"},te={class:"quiz-question"},ie={key:0,class:"badge-container"},se={key:0,width:"50",height:"50",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",class:"correct-badge"},ne=(0,n.uE)('<circle cx="50" cy="50" r="42" fill="black" data-v-0247ce98></circle><circle cx="50" cy="50" r="40" fill="red" data-v-0247ce98></circle><circle cx="50" cy="50" r="40" fill="white" clip-path="url(#lower-half)" data-v-0247ce98></circle><rect x="10" y="45" width="80" height="10" fill="black" data-v-0247ce98></rect><circle cx="50" cy="50" r="10" fill="white" stroke="black" stroke-width="2" data-v-0247ce98></circle><clipPath id="lower-half" data-v-0247ce98><rect x="10" y="50" width="80" height="50" data-v-0247ce98></rect></clipPath>',6),re=[ne],oe={key:1,class:"incorrect-badge"},le={class:"quiz-options"},ae=["onClick"],ue=["id","value","checked"],ce=["for"],de={key:0,class:"quiz-info"},he={class:"quiz-footer"},pe={key:0,class:"end-quiz-text"};function ze(e,t,i,s,o,l){return(0,n.wg)(),(0,n.iD)("div",G,[(0,n._)("div",J,[(0,n._)("div",X,[o.currentQuizIndex>0?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"control-btn prev-quiz",onClick:t[0]||(t[0]=(...e)=>l.goToPreviousQuestion&&l.goToPreviousQuestion(...e))},"← 이전 (P)")):(0,n.kq)("",!0),o.currentQuizIndex<this.quizDetail.data.length-1?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"control-btn next-quiz",onClick:t[1]||(t[1]=(...e)=>l.nextQuestion&&l.nextQuestion(...e))},(0,r.zw)(o.showAnswer?"다음 문제 → (Enter)":"다음 문제 → (N)"),1)):(0,n.kq)("",!0)]),(0,n._)("button",{class:"control-btn stop-quiz-button",onClick:t[2]||(t[2]=(...e)=>l.exitQuiz&&l.exitQuiz(...e))},"문제 그만풀기 (Q)")]),(0,n._)("div",ee,[(0,n._)("div",te,[(0,n._)("h2",null,(0,r.zw)(o.currentQuizIndex+1)+". "+(0,r.zw)(l.currentQuiz.문제),1),o.showAnswer?((0,n.wg)(),(0,n.iD)("div",ie,[o.isCorrect?((0,n.wg)(),(0,n.iD)("svg",se,re)):((0,n.wg)(),(0,n.iD)("span",oe,"✖"))])):(0,n.kq)("",!0)]),(0,n._)("div",le,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.shuffledOptions,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t,onClick:t=>l.toggleAnswer(e),style:(0,r.j5)(l.optionStyle(e))},[(0,n._)("input",{type:"checkbox",id:"option"+t,value:e,class:(0,r.C_)({"correct-answer":l.isOptionCorrect(e)&&o.showAnswer,"incorrect-answer":!l.isOptionCorrect(e)&&o.showAnswer&&l.isSelected(e)}),disabled:"true",checked:l.isSelected(e)},null,10,ue),(0,n._)("label",{for:"option"+t,class:(0,r.C_)({selected:l.isSelected(e)})},(0,r.zw)(o.indexToAlphabet[t]+". "+e),11,ce),o.showAnswer?((0,n.wg)(),(0,n.iD)("span",de,(0,r.zw)(l.infoText(e)),1)):(0,n.kq)("",!0)],12,ae)))),128))])]),o.showAnswer?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"control-btn submit-quiz",onClick:t[3]||(t[3]=(...e)=>l.checkAnswer&&l.checkAnswer(...e))},"제출 (Enter)"))]),(0,n._)("div",he,[o.currentQuizIndex===this.quizDetail.data.length-1?((0,n.wg)(),(0,n.iD)("span",pe,"마지막 문제입니다.")):(0,n.kq)("",!0),o.currentQuizIndex===this.quizDetail.data.length-1?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"control-btn restart-quiz",onClick:t[4]||(t[4]=(...e)=>l.restartQuiz&&l.restartQuiz(...e))},"처음부터")):(0,n.kq)("",!0)])])}var fe={props:{shuffleQuiz:{type:Boolean,required:!0},quizDetail:{type:Object,required:!0}},mounted(){window.addEventListener("keyup",this.handleKeyup)},beforeUnmount(){window.removeEventListener("keyup",this.handleKeyup)},data(){return{quizzesRandomized:this.shuffleArray(this.quizDetail.data),currentQuizIndex:0,selectedAnswers:[],showAnswer:!1,isCorrect:!1,isChangedComment:!1,indexToAlphabet:["A","B","C","D","E"]}},computed:{isSingleAnswer(){return 1===this.correctAnswersValues.length},currentQuiz(){return this.quizzesRandomized[this.currentQuizIndex]},shuffledOptions(){let e=["보기A","보기B","보기C","보기D","보기E"].filter((e=>this.currentQuiz[e])).map((e=>this.currentQuiz[e]));return this.shuffleQuiz?e.sort((()=>Math.random()-.5)):e},correctAnswers(){return this.currentQuiz?["정답1","정답2","정답3","정답4","정답5"].filter((e=>this.currentQuiz[e])).map((e=>this.currentQuiz[e])):[]},correctAnswersValues(){return this.currentQuiz?this.correctAnswers.map((e=>this.currentQuiz["보기"+e])):[]}},methods:{handleKeyup(e){if("Enter"===e.key)this.showAnswer?this.currentQuizIndex<this.quizDetail.data.length-1&&this.nextQuestion():this.checkAnswer();else if(["1","2","3","4","5"].includes(e.key)){const t=parseInt(e.key,10)-1,i=this.shuffledOptions[t];i&&this.toggleAnswer(i)}else if(["a","b","c","d","e"].includes(e.key)){const t=e.key.charCodeAt(0)-97,i=this.shuffledOptions[t];i&&this.toggleAnswer(i)}else"n"===e.key?this.currentQuizIndex<this.quizDetail.data.length-1&&this.nextQuestion():"p"===e.key?this.currentQuizIndex>0&&this.goToPreviousQuestion():"q"===e.key&&this.exitQuiz()},isSelected(e){return this.selectedAnswers.includes(e)},isAtLeastOneOptionSelected(){return this.selectedAnswers.length>0},isOptionDisabled(e){return!(!this.isSingleAnswer||!this.isAtLeastOneOptionSelected()||this.isSelected(e))||!!this.showAnswer},optionStyle(e){return this.showAnswer?this.isOptionCorrect(e)?{color:"#3e9c41",backgroundColor:"#d4edda",fontWeight:"bold"}:this.isSelected(e)?{backgroundColor:"#f8d7da",color:"#f44336"}:void 0:this.isSelected(e)?{backgroundColor:"#a8d2ff",cursor:"pointer",color:"#003f83",fontWeight:"bold"}:{cursor:"pointer"}},infoText(e){return this.isOptionCorrect(e)&&this.isSelected(e)?"(선택됨, 정답)":this.isOptionCorrect(e)&&!this.isSelected(e)?"(선택안됨, 정답)":!this.isOptionCorrect(e)&&this.isSelected(e)?"(선택됨, 오답)":""},shuffleArray(e){let t=[...e];if(!this.shuffleQuiz)return t;for(let i=t.length-1;i>0;i--){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}return t},checkAnswer(){this.isCorrect=this.selectedAnswers.sort().toString()===this.correctAnswersValues.sort().toString(),this.showAnswer=!0},goToPreviousQuestion(){this.currentQuizIndex--,this.selectedAnswers=[],this.showAnswer=!1},exitQuiz(){this.$emit("close")},isOptionCorrect(e){return this.correctAnswersValues.includes(e)},toggleAnswer(e){if(this.isSingleAnswer&&this.isAtLeastOneOptionSelected()&&!this.isSelected(e))return;if(this.showAnswer)return;const t=this.selectedAnswers.indexOf(e);-1===t?this.selectedAnswers.push(e):this.selectedAnswers.splice(t,1)},nextQuestion(){this.isChangedComment&&(this.updateComment(this.quizDetail.id,this.currentQuiz.문제,this.currentQuiz.Comment),this.isChangedComment=!1),this.currentQuizIndex++,this.selectedAnswers=[],this.showAnswer=!1},restartQuiz(){this.isChangedComment&&(this.updateComment(this.quizDetail.id,this.currentQuiz.문제,this.currentQuiz.Comment),this.isChangedComment=!1),this.quizzesRandomized=this.shuffleArray(this.quizDetail.data),this.currentQuizIndex=0,this.selectedAnswers=[],this.showAnswer=!1},async updateComment(e,t,i){const s=this.$db,n=await s.quizzes.get(e);console.log(n);const r=n.data.find((e=>e.문제==t));console.log(r),r?(r.Comment=i,await s.quizzes.put(n)):console.error("해당 문제를 찾을 수 없습니다.")}}};const we=(0,h.Z)(fe,[["render",ze],["__scopeId","data-v-0247ce98"]]);var ge=we,me={components:{QuizDetail:ge},data(){return{quizzes:[],showQuizDetail:!1,shuffleQuiz:!1}},computed:{sortedQuizzes(){return[...this.quizzes].sort(((e,t)=>new Date(t.inputdate)-new Date(e.inputdate)))}},created(){this.fetchQuizzes()},methods:{async fetchQuizzes(){try{const e=this.$db,t=await e.quizzes.toArray();this.quizzes=t,console.log(this.quizzes)}catch(e){console.error("퀴즈 데이터 가져오기 오류:",e)}},async deleteQuiz(e){if(confirm("정말로 삭제하시겠습니까? 삭제 후 복구할 수 없습니다."))try{const t=this.$db;await t.quizzes.where({id:e}).delete(),this.fetchQuizzes()}catch(t){console.error("퀴즈 삭제 오류:",t)}},formatQuizDateTime(e){const t=new Date(e),i=t.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),s=t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});return`${i} ${s}`},startQuiz(e){confirm("문제를 섞으시겠습니까?")?this.shuffleQuiz=!0:this.shuffleQuiz=!1,this.selectedQuiz=this.quizzes.find((t=>t.id===e)),this.showQuizDetail=!0},closeQuizDetail(){this.showQuizDetail=!1,this.selectedQuiz=null}}};const be=(0,h.Z)(me,[["render",Y],["__scopeId","data-v-d1413196"]]);var ve=be;const Qe=[{path:"/",name:"MyHome",component:D},{path:"/Upload",name:"Upload",component:E},{path:"/Quiz",name:"Quiz",component:ve}],ke=(0,f.p7)({history:(0,f.r5)(),routes:Qe});var ye=ke,Ce=i(7603);const De=new Ce.ZP("QuizDatabase");De.version(1).stores({quizzes:"++id, name, data, inputdate"}),De.open().catch((e=>{console.error("데이터베이스 열기 오류:",e)}));const qe=(0,s.ri)(z);qe.config.globalProperties.$db=De,qe.use(ye).mount("#app")}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,s,n,r){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],n=e[c][1],r=e[c][2];for(var l=!0,a=0;a<s.length;a++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](s[a])}))?s.splice(a--,1):(l=!1,r<o&&(o=r));if(l){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,n,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/my-quiz-app/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,o=s[0],l=s[1],a=s[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(a)var c=a(i)}for(t&&t(s);u<o.length;u++)r=o[u],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},s=self["webpackChunkmy_quiz_app"]=self["webpackChunkmy_quiz_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(5681)}));s=i.O(s)})();
//# sourceMappingURL=app.079dac15.js.map